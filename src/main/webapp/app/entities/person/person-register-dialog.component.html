<form name="editForm" *ngIf="!created" role="form" novalidate (ngSubmit)="save()" #editForm="ngForm">
    <div style="margin: 15px">
        <p-breadcrumb [model]="mapSiteItems"></p-breadcrumb>
    </div>
    <div class="modal-body">
        <jhi-alert-error></jhi-alert-error>
        <p-blockUI [blocked]="blocked">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"
                        jhiTranslate="samtagatewayApp.person.home.generalInformation">
                    </h5>
                </div>
                <div class="card-block container">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.person.personality"
                                       for="field_personality">Personality</label>
                                <select class="custom-select" name="personality"
                                        [(ngModel)]="person.personality" (change)="onChangeNationalCode(editForm.controls.code?.invalid || editForm.controls.personality?.invalid || isSaving)"
                                        id="field_personality" required>
                                    <option value="LEGAL">{{'samtagatewayApp.Personality.LEGAL' | translate}}</option>
                                    <option value="NATURAL">{{'samtagatewayApp.Personality.NATURAL' | translate}}
                                    </option>
                                </select>
                                <div
                                    [hidden]="!(editForm.controls.personality?.dirty && editForm.controls.personality?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.personality?.errors?.required"
                                           jhiTranslate="entity.validation.required">
                                        This field is required.
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 vertical-center-group" *ngIf="!person.personality">
                        <div class="alert alert-info" role="alert">
                            <strong>لطفا ابتدا نوع مالکیت را انتخاب کنید</strong>
                        </div>
                        </div>
                        <div class="col-md-6" *ngIf="person.personality && person.personality === Personality[Personality.LEGAL]">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.person.country"
                                       for="field_country">Country</label>
                                <select class="custom-select" id="field_country" name="country"
                                         [(ngModel)]="person.countryId"
                                         required (ngModelChange)="changeCountry()">
                                    <option *ngIf="!editForm.value.country" [ngValue]="null" selected></option>
                                    <option *ngFor="let countryOption of countries; trackBy: trackCountryById"
                                            [ngValue]="countryOption.id"
                                    >
                                        {{countryOption.name}}
                                    </option>
                                </select>
                            </div>
                            <div
                                [hidden]="!(editForm.controls.country?.dirty && editForm.controls.country?.invalid)">
                                <small class="form-text text-danger"
                                       [hidden]="!editForm.controls.country?.errors?.required"
                                       jhiTranslate="entity.validation.required">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                        <div class="col-md-6" *ngIf="person.personality && person.personality === Personality[Personality.NATURAL]">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.person.nationality"
                                       for="field_nationality">Country</label>
                                <select class="custom-select" id="field_nationality"
                                        name="nationality"
                                        [(ngModel)]="person.nationalityId"
                                        required (change)="changeNationality()">
                                    <option *ngIf="!editForm.value.nationality" selected></option>
                                    <option *ngFor="let countryOption of countries; trackBy: trackNationalityById"
                                            [ngValue]="countryOption.id">
                                        {{countryOption.name}}
                                    </option>
                                </select>
                            </div>
                            <div
                                [hidden]="!(editForm.controls.country?.dirty && editForm.controls.country?.invalid)">
                                <small class="form-text text-danger"
                                       [hidden]="!editForm.controls.country?.errors?.required"
                                       jhiTranslate="entity.validation.required">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                    </div>

                    <div class="row" *ngIf="person.personality">
                        <div class="col-md-4">
                              <div class="form-group">
                                <label
                                    *ngIf="person.personality === Personality[Personality.LEGAL] && country.checkNationalCode"
                                    class="form-control-label"
                                    jhiTranslate="samtagatewayApp.person.codeLegal"
                                    for="field_code">National Code</label>
                                <label
                                    *ngIf="person.personality === Personality[Personality.NATURAL] && nationality.checkNationalCode"
                                    class="form-control-label"
                                    jhiTranslate="samtagatewayApp.person.nationalCode"
                                    for="field_code">National Code</label>
                                <label
                                    *ngIf="(person.personality === Personality[Personality.NATURAL] && !nationality.checkNationalCode)||(person.personality === Personality[Personality.LEGAL] && !country.checkNationalCode)"
                                    class="form-control-label"
                                    jhiTranslate="samtagatewayApp.person.codeOther"
                                    for="field_code">National Code</label>
                                <input  type="text" class="form-control" name="code"
                                       required national-code
                                       [isLegal]="person.personality === Personality[Personality.LEGAL]"
                                       id="field_code" search-after-typed (onSearch)="onChangeNationalCode(editForm.controls.code?.invalid || editForm.controls.personality?.invalid || isSaving)"
                                       [(ngModel)]="person.code" numeric
                                       [minlength]="person.personality === Personality[Personality.LEGAL]?11:10"
                                       [maxlength]="person.personality === Personality[Personality.LEGAL]?11:10"/>
                                <div *ngIf="existPerson">
                                    <small class="form-text text-danger"
                                           jhiTranslate="samtagatewayApp.person.message.existPerson"></small>
                                </div>
                                <div
                                    [hidden]="!(editForm.controls.code?.dirty && editForm.controls.code?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.code?.errors?.minlength"
                                           jhiTranslate="entity.validation.minlength"
                                           translateValues="{ min: {{person.personality === Personality[Personality.LEGAL]?11:10}} }">
                                        This field is required to be at least 10 characters.
                                    </small>
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.code?.errors?.maxlength"
                                           jhiTranslate="entity.validation.maxlength"
                                           translateValues="{ max: {{person.personality === Personality[Personality.LEGAL]?11:10}} }">
                                        This field cannot be longer than 10 characters.
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-control-label" *ngIf="person.personality && person.personality === Personality[Personality.NATURAL]"
                                       jhiTranslate="samtagatewayApp.person.birthday"
                                       for="field_birthday">Birthday</label>
                                <label class="form-control-label" *ngIf="person.personality && person.personality === Personality[Personality.LEGAL]"
                                       jhiTranslate="samtagatewayApp.person.registerDate"
                                       for="field_birthday">Birthday</label>
                                <div class="d-flex">
                                    <ng2-datetimepicker  [rtlActive]="true" time="00:00:00"
                                                        id="field_birthday" [disableTime]="true"
                                                        [minDateTime]="minDateTime" [maxDateTime]="maxDateTime"
                                                        class="form-control" required (onChangeDateTime)="changeBirthday()"
                                                        name="birthday" [(ngModel)]="person.birthday"
                                    ></ng2-datetimepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4" *ngIf="person.personality === Personality[Personality.NATURAL]">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.person.idCode"
                                       for="field_idCode">Id
                                    Code</label>
                                <input  type="text" class="form-control"
                                       name="idCode" required [disabled]="notHaveIdCode"
                                       id="field_idCode" search-after-typed (onSearch)="onChangeBaseInfo()"
                                       [(ngModel)]="person.idCode" minlength="1" maxlength="42"/>
                                <div
                                    [hidden]="!(editForm.controls.idCode?.dirty && editForm.controls.idCode?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.idCode?.errors?.minlength"
                                           jhiTranslate="entity.validation.minlength" translateValues="{ min: 1 }">
                                        This field is required to be at least 3 characters.
                                    </small>
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.idCode?.errors?.maxlength"
                                           jhiTranslate="entity.validation.maxlength" translateValues="{ max: 42 }">
                                        This field cannot be longer than 42 characters.
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4" *ngIf="person.personality === Personality[Personality.LEGAL]">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.person.registerNo"
                                       for="field_registerNo">Register No</label>
                                <input  type="text" class="form-control" name="registerNo"
                                       id="field_registerNo" required
                                       search-after-typed (onSearch)="onChangeBaseInfo()"
                                       [(ngModel)]="person.registerNo" minlength="1" maxlength="42"/>
                                <div
                                    [hidden]="!(editForm.controls.registerNo?.dirty && editForm.controls.registerNo?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.registerNo?.errors?.minlength"
                                           jhiTranslate="entity.validation.minlength" translateValues="{ min: 1 }">
                                        This field is required to be at least 1 characters.
                                    </small>
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.registerNo?.errors?.maxlength"
                                           jhiTranslate="entity.validation.maxlength" translateValues="{ max: 42 }">
                                        This field cannot be longer than 42 characters.
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="person.personality && (!person.companyId || canInput)">
                        <div class="row" *ngIf="person.personality === Personality[Personality.LEGAL]">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.name"
                                           for="field_name">Name</label>
                                    <input  type="text" class="form-control"
                                           name="name" id="field_name" required [disabled]="country.checkNationalCode"
                                            [(ngModel)]="person.name" minlength="3" maxlength="42"/>
                                    <div [hidden]="!(editForm.controls.name?.dirty && editForm.controls.name?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.name?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.name?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 42 }">
                                            This field cannot be longer than 42 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.postalCode"
                                           for="field_postalCode">Postal Code</label>
                                    <input  type="text" class="form-control" name="postalCode"
                                            id="field_postalCode" [disabled]="country.checkNationalCode"
                                            (blur)="onBlurPostalCode()"
                                            [(ngModel)]="person.postalCode" minlength="10" maxlength="10"/>
                                    <div
                                        [hidden]="!(editForm.controls.postalCode?.dirty && editForm.controls.postalCode?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.postalCode?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 10 }">
                                            This field is required to be at least 10 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.postalCode?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 10 }">
                                            This field cannot be longer than 10 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label"
                                           jhiTranslate="samtagatewayApp.person.economicCode"
                                           for="field_economicCode">Economic Code</label>
                                    <input  type="text" class="form-control" name="economicCode"
                                            required id="field_economicCode"
                                            [(ngModel)]="person.economicCode" minlength="12" maxlength="12"/>
                                    <div
                                        [hidden]="!(editForm.controls.economicCode?.dirty && editForm.controls.economicCode?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.economicCode?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 12 }">
                                            This field is required to be at least 12 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.economicCode?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 12 }">
                                            This field cannot be longer than 12 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" *ngIf="person.personality === Personality[Personality.LEGAL]">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.telephone"
                                           for="field_telephone">Telephone</label>
                                    <input  type="text" class="form-control" name="telephone"
                                           id="field_telephone" required numeric pattern="^[0-9-]*$"
                                           [(ngModel)]="person.telephone" minlength="3" maxlength="12"/>
                                    <div
                                        [hidden]="!(editForm.controls.telephone?.dirty && editForm.controls.telephone?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.telephone?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.telephone?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 12 }">
                                            This field cannot be longer than 12 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.cellphone"
                                           for="field_cellphone">Cellphone</label>
                                    <input  type="text" class="form-control" name="cellphone"
                                           id="field_cellphone" required numeric pattern="^[0-9-]*$"
                                           [(ngModel)]="person.cellphone" minlength="3" maxlength="15"/>
                                    <div
                                        [hidden]="!(editForm.controls.cellphone?.dirty && editForm.controls.cellphone?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.cellphone?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.cellphone?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 15 }">
                                            This field cannot be longer than 12 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.email"
                                           for="field_email">email</label>
                                    <input class="form-control"
                                           type="email"
                                           pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                           name="userEmail" id="field_email"
                                           [(ngModel)]="person.email" required
                                           (blur)="checkUserExistByEmail()"
                                    />
                                    <div *ngIf="existEmail">
                                        <small class="form-text text-danger"
                                               jhiTranslate="samtagatewayApp.person.message.existEmail"></small>
                                    </div>
                                    <div
                                        [hidden]="!(editForm.controls.email?.dirty && editForm.controls.email?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.email?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 10 }">
                                            This field is required to be at least 10 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.email?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 10 }">
                                            This field cannot be longer than 10 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row" *ngIf="person.personality === Personality[Personality.NATURAL]">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.firstName"
                                           for="field_firstName">First Name</label>
                                    <input [disabled]="nationality.checkNationalCode" type="text" class="form-control" name="firstName"
                                           id="field_firstName" required
                                           [(ngModel)]="person.firstName" minlength="3" maxlength="42"/>
                                    <div
                                        [hidden]="!(editForm.controls.firstName?.dirty && editForm.controls.firstName?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.firstName?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.firstName?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 42 }">
                                            This field cannot be longer than 42 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.lastName"
                                           for="field_lastName">Last
                                        Name</label>
                                    <input [disabled]="nationality.checkNationalCode" type="text" class="form-control" name="lastName"
                                           id="field_lastName" required
                                           [(ngModel)]="person.lastName" minlength="3" maxlength="42"/>
                                    <div
                                        [hidden]="!(editForm.controls.lastName?.dirty && editForm.controls.lastName?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.lastName?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.lastName?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 42 }">
                                            This field cannot be longer than 42 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.fatherName"
                                           for="field_fatherName">Father Name</label>
                                    <input [disabled]="nationality.checkNationalCode" type="text" class="form-control" name="fatherName"
                                           id="field_fatherName" required
                                           [(ngModel)]="person.fatherName" minlength="3" maxlength="42"/>
                                    <div
                                        [hidden]="!(editForm.controls.fatherName?.dirty && editForm.controls.fatherName?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.fatherName?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.fatherName?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 42 }">
                                            This field cannot be longer than 42 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" *ngIf="person.personality === Personality[Personality.NATURAL]">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.telephone"
                                           for="field_telephone1">Telephone</label>
                                    <input  type="text" class="form-control" name="telephone"
                                           id="field_telephone1" required
                                           [(ngModel)]="person.telephone" minlength="3" maxlength="12"/>
                                    <div
                                        [hidden]="!(editForm.controls.telephone?.dirty && editForm.controls.telephone?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.telephone?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.telephone?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 12 }">
                                            This field cannot be longer than 12 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.cellphone"
                                           for="field_cellphone1">Cellphone</label>
                                    <input  type="text" class="form-control" name="cellphone"
                                           id="field_cellphone1" required
                                           [(ngModel)]="person.cellphone" minlength="3" maxlength="15"/>
                                    <div
                                        [hidden]="!(editForm.controls.cellphone?.dirty && editForm.controls.cellphone?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.cellphone?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.cellphone?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 15 }">
                                            This field cannot be longer than 12 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.email"
                                           for="field_email1">email</label>
                                    <input class="form-control"
                                           type="email"
                                           pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                           name="email1" id="field_email1"
                                           [(ngModel)]="person.email"
                                           (blur)="checkUserExistByEmail()"
                                           required
                                    />
                                    <div *ngIf="existEmail">
                                        <small class="form-text text-danger"
                                               jhiTranslate="samtagatewayApp.person.message.existEmail"></small>
                                    </div>
                                    <div
                                        [hidden]="!(editForm.controls.email?.dirty && editForm.controls.email?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.email?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 10 }">
                                            This field is required to be at least 10 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.email?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 10 }">
                                            This field cannot be longer than 10 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" *ngIf="person.personality === Personality[Personality.NATURAL]">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.country"
                                           for="field_country1">Country</label>
                                    <select class="custom-select" id="field_country1" name="country"
                                            [(ngModel)]="person.countryId"
                                            required (ngModelChange)="changeCountry($event)">
                                        <option *ngIf="!editForm.value.country" [ngValue]="null" selected></option>
                                        <option *ngFor="let countryOption of countries; trackBy: trackCountryById"
                                                [ngValue]="countryOption.id"
                                        >
                                            {{countryOption.name}}
                                        </option>
                                    </select>
                                </div>
                                <div
                                    [hidden]="!(editForm.controls.country?.dirty && editForm.controls.country?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.country?.errors?.required"
                                           jhiTranslate="entity.validation.required">
                                        This field is required.
                                    </small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.birthRegion"
                                           for="field_birthRegion">Birth Region</label>
                                    <select class="custom-select" id="field_birthRegion"
                                            name="birthRegion"
                                            [(ngModel)]="person.birthRegionId">
                                        <option *ngIf="!editForm.value.birthRegion" [ngValue]="null" selected></option>
                                        <option *ngFor="let countryOption of regions; trackBy: trackBirthRegionById"
                                                [ngValue]="countryOption.id"
                                        >
                                            {{countryOption.name}}
                                        </option>
                                    </select>
                                </div>
                                <div
                                    [hidden]="!(editForm.controls.country?.dirty && editForm.controls.country?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.country?.errors?.required"
                                           jhiTranslate="entity.validation.required">
                                        This field is required.
                                    </small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.postalCode"
                                           for="field_postalCode1">Postal Code</label>
                                    <input  type="text" class="form-control" name="postalCode"
                                           id="field_postalCode1" [required]="country?.checkNationalCode"
                                           [pattern]="regexCode"
                                           [numeric]
                                           (blur)="onBlurPostalCode()"
                                           [(ngModel)]="person.postalCode" minlength="10" maxlength="10"/>
                                    <div
                                        [hidden]="!(editForm.controls.postalCode?.dirty && editForm.controls.postalCode?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.postalCode?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 10 }">
                                            This field is required to be at least 10 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.postalCode?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength" translateValues="{ max: 10 }">
                                            This field cannot be longer than 10 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.address"
                                           for="field_address">Address</label>
                                    <textarea [disabled]="country?.checkNationalCode" type="text"
                                              class="form-control"
                                              name="address"
                                              id="field_address"
                                              [(ngModel)]="person.address" minlength="7" maxlength="255"></textarea>
                                    <div
                                        [hidden]="!(editForm.controls.address?.dirty && editForm.controls.address?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.address?.errors?.minlength"
                                               jhiTranslate="entity.validation.minlength" translateValues="{ min: 3 }">
                                            This field is required to be at least 3 characters.
                                        </small>
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.address?.errors?.maxlength"
                                               jhiTranslate="entity.validation.maxlength"
                                               translateValues="{ max: 255 }">
                                            This field cannot be longer than 255 characters.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6" *ngIf="country.checkNationalCode">
                                <div class="form-group">
                                    <label *ngIf="person.personality === Personality[Personality.LEGAL]"
                                           class="form-control-label" jhiTranslate="samtagatewayApp.person.regionLegal"
                                           for="field_region">Region</label>
                                    <label *ngIf="person.personality === Personality[Personality.NATURAL]"
                                           class="form-control-label" jhiTranslate="samtagatewayApp.person.region"
                                           for="field_region">Region</label>
                                    <input-region-selector  [idSelector]="true"
                                                           [oneSelection]="true"
                                                           [countryId]="person.countryId"
                                                           [selectOfLevel]="[2,3,4]"
                                                           class="form-control" id="field_region" name="region"
                                                           [(ngModel)]="person.regionId">
                                    </input-region-selector>
                                </div>
                                <div [hidden]="!(editForm.controls.region?.dirty && editForm.controls.region?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.region?.errors?.required"
                                           jhiTranslate="entity.validation.required">
                                        This field is required.
                                    </small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="samtagatewayApp.person.location"
                                           for="field_location">Location</label>
                                    <input-location-selector  [idSelector]="false"
                                                             [dataAccess]="false"
                                                             [selectByPriority]="true" required
                                                             class="form-control" id="field_location" name="location"
                                                             [(ngModel)]="person.locations">
                                    </input-location-selector>
                                </div>
                                <div
                                    [hidden]="!(editForm.controls.location?.dirty && editForm.controls.location?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.region?.errors?.required"
                                           jhiTranslate="entity.validation.required">
                                        This field is required.
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-6">
                                <input type="checkbox" id="old"
                                       name="old" [(ngModel)]="old">
                                <label class="form-check-label" for="old">
                                    <span jhiTranslate="samtagatewayApp.person.old">old</span>
                                </label>
                            </div>

                        </div>
                        <br/>
                    </div>
                </div>
            </div>
            <div class="card" *ngIf="old">
                <div class="card-header">
                    <h5 class="mb-0"
                        jhiTranslate="samtagatewayApp.person.home.oldSellInformation">
                    </h5>
                </div>
                <div class="card-block container">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label class="form-control-label"
                                   jhiTranslate="samtagatewayApp.person.salesCode"
                                   for="field_salesCode">Share Percent</label>
                            <div class="input-group">
                                <input class="form-control ng-pristine ng-valid ng-touched" id="field_salesCode"
                                       [(ngModel)]="salesCode" name="salesCode">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button"
                                            [disabled]="!person.code || !salesCode"
                                            (click)="searchSalesCode()">
                                        <span class="fa fa-search"></span>
                                    </button>
                                </div>
                            </div>
                            <div [hidden]="!notFind">
                                <small class="form-text text-danger">هیچ مشتری یافت نشد.
                                </small>
                            </div>

                        </div>
                        <div class="col-md-6 vertical-center-group">
                            <div class="alert alert-info" role="alert">
                                <strong>لطفا تمام کد های فروش سیستم قدیم را وارد کنید.</strong>
                            </div>
                        </div>
                        <div>
                            <p-dataTable [value]="customers"
                                         [emptyMessage]="'global.messages.info.emptyRecords' | translate"
                                         [immutable]="false" [paginator]="false" [responsive]="true" [stacked]="false">

                                <p-headerColumnGroup>
                                    <p-row>
                                        <p-column field="name" [sortable]="true">
                                            <ng-template pTemplate="header">
                                                <span jhiTranslate="samtagatewayApp.customer.name">Name</span>
                                            </ng-template>
                                        </p-column>
                                        <p-column field="code" [sortable]="true">
                                            <ng-template pTemplate="header">
                                                <span jhiTranslate="samtagatewayApp.customer.code">Code</span>
                                            </ng-template>
                                        </p-column>
                                        <p-column styleClass="col-button"></p-column>

                                    </p-row>
                                </p-headerColumnGroup>

                                <p-column field="name"
                                          [header]="'samtagatewayApp.customer.name' | translate"></p-column>
                                <p-column field="code"
                                          [header]="'samtagatewayApp.customer.code' | translate"></p-column>
                                <p-column class="component">
                                    <ng-template let-item="rowData" pTemplate="body">
                                        <div class="btn-group" ngbDropdown placement="right">
                                            <button type="button" class="btn btn-danger"
                                                    (click)="removeSalesCode(item)">
                                                <span class="fa fa-delete"></span>
                                                <span jhiTranslate="entity.action.delete">حذف</span>
                                            </button>
                                        </div>
                                    </ng-template>
                                </p-column>
                            </p-dataTable>

                        </div>
                    </div>
                </div>
            </div>
            <div class="card" *ngIf="person.personality">
                <div class="card-header">
                    <h5 class="mb-0"
                        jhiTranslate="samtagatewayApp.person.home.register">
                    </h5>
                </div>
                <div class="card-block container">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-control-label"
                                       jhiTranslate="samtagatewayApp.person.username"
                                       for="field_username">Share Percent</label>
                                <input class="form-control"
                                       pattern="^[_'.@A-Za-z0-9-]*$"
                                       name="username" id="field_username"
                                       [(ngModel)]="person.username"
                                       (blur)="checkUserExistByLogin(editForm.controls.username?.invalid || isSaving)"
                                       required
                                />
                                <div *ngIf="existUser">
                                    <small class="form-text text-danger"
                                           jhiTranslate="samtagatewayApp.person.message.existUser"></small>
                                </div>
                                <div
                                    [hidden]="!(editForm.controls.username?.dirty && editForm.controls.username?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.username?.errors?.pattern"
                                           jhiTranslate="register.messages.validate.login.pattern">
                                        Your username can only contain letters and digits.
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-control-label"
                                       jhiTranslate="samtagatewayApp.person.password"
                                       for="field_password">Share Percent</label>
                                <input class="form-control"
                                       type="password"
                                       name="password" id="field_password"
                                       [(ngModel)]="person.password"
                                       required
                                       minlength="4" maxlength="100"/>
                                <div
                                    [hidden]="!(editForm.controls.password?.dirty && editForm.controls.password?.invalid)">
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.password?.errors?.minlength"
                                           jhiTranslate="entity.validation.minlength" translateValues="{ min: 4 }">
                                        This field is required to be at least 1 characters.
                                    </small>
                                    <small class="form-text text-danger"
                                           [hidden]="!editForm.controls.password?.errors?.maxlength"
                                           jhiTranslate="entity.validation.maxlength" translateValues="{ max: 100 }">
                                        This field cannot be longer than 42 characters.
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-control-label"
                                       jhiTranslate="samtagatewayApp.person.confirmPassword"
                                       for="field_confirmPassword">Share Percent</label>
                                <input class="form-control"
                                       type="password"
                                       name="confirmPassword" id="field_confirmPassword"
                                       [(ngModel)]="person.confirmPassword"
                                       required
                                />
                                <div *ngIf="(person.confirmPassword && (person.confirmPassword!==person.password))">
                                    <small class="form-text text-danger"
                                           jhiTranslate="samtagatewayApp.person.message.wrongConfirmPassword"></small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </p-blockUI>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="clear()">
            <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
        </button>
        <button *ngIf="!isView" type="submit"
                [disabled]="!personFind || editForm.form.invalid || isSaving || person.password!==person.confirmPassword || existUser || existPerson"
                class="btn btn-primary">
            <span class="fa fa-save"></span>&nbsp;<span jhiTranslate="entity.action.save">Save</span>
        </button>
    </div>
</form>
<div class="component">
    <div class="card" *ngIf="created">
        <div class="messages ui-g ui-fluid ">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-4">
                        <img src="../../../content/images/good.png"/>
                    </div>
                    <div class="col-md-8" style="margin: auto">
                        <div class="row" style="text-align:right">
                            <div>کاربر با موفقیت ایجاد شد ، پس از تایید امکان دسترسی به سیستم فراهم خواهد شد.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12" style="text-align: center">
                        <button type="button" class="btn btn-info" [routerLink]="['/']">بازگشت</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
