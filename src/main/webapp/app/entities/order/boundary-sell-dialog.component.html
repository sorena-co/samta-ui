<form name="editForm" role="form" novalidate (ngSubmit)="save()" #editForm="ngForm">
    <div class="modal-body">
        <jhi-alert-error></jhi-alert-error>
        <jhi-alert></jhi-alert>
        <p-steps [(activeIndex)]="activeIndex" [model]="items" styleClass="steps-custom"></p-steps>
        <div *ngIf="activeIndex===0">
            <div class="card" *ngIf="!boundaryDTO.orderId&& showSearch">
                <div class="card-header">
                    <h5 class="mb-0"
                        jhiTranslate="entity.action.search">
                        Create or edit a Customer
                    </h5>
                </div>
                <div class="card-block container">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-control-label" jhiTranslate="samtagatewayApp.customer.searchRfId"
                                   for="field_searchRfId">Order
                                No</label>
                            <input [disabled]="isView" type="text" class="form-control" name="searchRfId"
                                   id="field_searchRfId"
                                   [(ngModel)]="searchRfId"/>
                        </div>
                        <div class="col-md-6">
                            <label class="form-control-label" jhiTranslate="samtagatewayApp.customer.plaque"
                                   for="field_plaque">Name</label>
                            <jhi-plaque [disabled]="isView" [plaqueId]="searchPlaqueTemplateId"
                                        id="field_plaque"
                                        [(ngModel)]="searchPlaque" class="form-control"
                                        [ngModelOptions]="{standalone: true}"></jhi-plaque>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <button type="button" (click)="search()" class="form-control">
                                <span jhiTranslate="entity.action.search">Save</span>
                                <span class="fa fa-search"></span>
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button type="button" (click)="create()" class="form-control">
                                <span jhiTranslate="entity.action.create">Save</span>
                                <span class="fa fa-plus"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card" style=
                "margin-top: 25px" *ngIf="existCustomer!==null && existCustomer!==undefined">
                <div class="card-header">
                    <h5 *ngIf="customer.id" class="mb-0"
                        jhiTranslate="entity.action.carInformation">
                        Create or edit a Customer
                    </h5>
                    <div class="row" *ngIf="!customer.id">
                        <h5 class="col-md-3"
                            jhiTranslate="entity.action.carInformation">
                            Create or edit
                        </h5>
                        <div class="col-md-8"></div>
                        <button type="button" *ngIf="customers.length === 0" class="btn btn-primary col-md-1"
                                (click)="newCustomer()">
                            <span class="fa fa-plus"></span>
                            <span jhiTranslate="entity.action.create">Create</span>
                        </button>
                    </div>
                </div>
                <div class="card-block container">
                    <div class="row" *ngIf="customer.id">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="form-control-label"
                                       jhiTranslate="samtagatewayApp.vehicleModel.home.title"
                                       for="field_vehicleModel">Product</label>
                                <input disabled type="text" class="form-control" name="vehicleModelTItleee"
                                       id="field_vehicleModel1"
                                       [(ngModel)]="customer.vehicleModelTitle"/>
                            </div>
                            <div
                                [hidden]="!(editForm.controls.product?.dirty && editForm.controls.product?.invalid)">
                                <small class="form-text text-danger"
                                       [hidden]="!editForm.controls.product?.errors?.required"
                                       jhiTranslate="entity.validation.required">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                        <div class="col-md-3"
                             *ngIf="vehicleModel.havePrimitiveMeasure">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.oilTank.productId"
                                       for="field_product">Product</label>
                                <input disabled type="text" class="form-control" name="product"
                                       id="field_product"
                                       [(ngModel)]="customer.productTitle"/>
                            </div>
                            <div
                                [hidden]="!(editForm.controls.product?.dirty && editForm.controls.product?.invalid)">
                                <small class="form-text text-danger"
                                       [hidden]="!editForm.controls.product?.errors?.required"
                                       jhiTranslate="entity.validation.required">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.customer.plaque"
                                       for="field_plaque">Name</label>
                                <jhi-plaque [disabled]="isView" [plaqueId]="customer.plaqueTemplateId"
                                            id="field_plaque232"
                                            [required]="true"
                                            [(ngModel)]="customer.plaque" class="form-control"
                                            [ngModelOptions]="{standalone: true}"></jhi-plaque>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="!customer.id">
                        <form *ngIf="customerCreate || customerEdit" name="editFormCustomer" role="form" novalidate
                              #editFormCustomer="ngForm">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="form-control-label"
                                               jhiTranslate="samtagatewayApp.vehicleModel.home.title"
                                               for="field_vehicleModel">Vehicle Model</label>
                                        <p-dropdown [options]="customVehicleModels"
                                                    [(ngModel)]="customer.vehicleModelId"
                                                    [filter]="true"
                                                    [disabled]="isView"
                                                    class="form-control"
                                                    (ngModelChange)="onChangeVehicleModel($event)"
                                                    filterBy="label"
                                                    id="field_vehicleModel"
                                                    name="vm1"
                                                    ngDefaultControl
                                        >
                                        </p-dropdown>
                                    </div>
                                </div>
                                <div class="col-md-3" *ngIf="vehicleModel.havePrimitiveMeasure">
                                    <div class="form-group">
                                        <label class="form-control-label"
                                               jhiTranslate="samtagatewayApp.oilTank.productId"
                                               for="field_product">Product</label>
                                        <p-dropdown [options]="customProducts" [(ngModel)]="customer.productId"
                                                    [filter]="true"
                                                    [disabled]="isView"
                                                    class="form-control"
                                                    filterBy="label"
                                                    id="field_product1"
                                                    name="productId1"
                                                    ngDefaultControl
                                        >
                                        </p-dropdown>
                                    </div>
                                    <div
                                        [hidden]="!(editForm.controls.product?.dirty && editForm.controls.product?.invalid)">
                                        <small class="form-text text-danger"
                                               [hidden]="!editForm.controls.product?.errors?.required"
                                               jhiTranslate="entity.validation.required">
                                            This field is required.
                                        </small>
                                    </div>
                                </div>
                                <div class="col-md-3" *ngIf="vehicleModel.havePrimitiveMeasure">
                                    <div class="form-group">
                                        <label class="form-control-label"
                                               jhiTranslate="samtagatewayApp.customer.rfId"
                                               for="field_rfId">Name</label>
                                        <input [disabled]="isView" type="text" class="form-control"
                                               name="rfId"
                                               id="field_rfId"
                                               [(ngModel)]="carRfId.code"
                                               required/>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="form-control-label" jhiTranslate="samtagatewayApp.customer.plaque"
                                               for="field_plaque">Name</label>
                                        <jhi-plaque [disabled]="isView" [plaqueId]="customer.plaqueTemplateId"
                                                    id="field_plaque2323232"
                                                    [required]="true"
                                                    [(ngModel)]="customer.plaque" class="form-control"
                                                    [ngModelOptions]="{standalone: true}"></jhi-plaque>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <p-dataTable [hidden]="customerCreate || customerEdit" #dt [value]="customers"
                                     [immutable]="false"
                                     [paginator]="false" [responsive]="true" [stacked]="false">
                            <p-headerColumnGroup>
                                <p-row>
                                    <p-column field="vehicleModel" [sortable]="false">
                                        <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.vehicleModel.home.title">Person</span>
                                        </ng-template>
                                    </p-column>
                                    <p-column *ngIf="vehicleModel.havePrimitiveMeasure" field="productTitle"
                                              [sortable]="false">
                                        <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.customer.product">Share Percent</span>
                                        </ng-template>
                                    </p-column>
                                    <p-column styleClass="col-button2" *ngIf="!isView">
                                        <ng-template pTemplate="header">
                                        </ng-template>
                                    </p-column>
                                </p-row>
                            </p-headerColumnGroup>

                            <p-column field="vehicleModelTitle"
                                      [header]="'samtagatewayApp.carTank.tankNo' | translate"></p-column>
                            <p-column *ngIf="vehicleModel.havePrimitiveMeasure" field="productTitle"
                                      [header]="'samtagatewayApp.oilTank.oilTankType' | translate">
                            </p-column>
                            <p-column class="component" *ngIf="!isView">
                                <ng-template let-item="rowData" pTemplate="body">
                                    <div class="btn-group" ngbDropdown placement="right">
                                        <button type="button" class="btn btn-danger"
                                                (click)="deleteCustomer()">
                                            <span class="fa fa-remove"></span>
                                            <span jhiTranslate="entity.action.delete">delete</span>
                                        </button>
                                        <button type="button" class="btn btn-info"
                                                (click)="editCustomer()">
                                            <span class="fa fa-edit"></span>
                                            <span jhiTranslate="entity.action.edit">edit</span>
                                        </button>
                                    </div>
                                </ng-template>
                            </p-column>
                        </p-dataTable>
                    </div>
                </div>
                <div class="card-footer" [hidden]="!customerCreate && !customerEdit">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cancelCustomer()">
                        <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                    </button>
                    <button type="button" class="btn btn-primary"
                            [disabled]="!customer.plaque || !customer.vehicleModelId || (vehicleModel.havePrimitiveMeasure && (!carRfId.code || !customer.productId))"
                            (click)="saveCustomer()">
                        <span class="fa fa-save"></span>&nbsp;<span
                        jhiTranslate="entity.action.save">Save</span>
                    </button>
                </div>
            </div>


            <div class="card" style="margin-top: 25px"
                 *ngIf="(vehicleModel.havePrimitiveMeasure) && existCustomer!==null && existCustomer!==undefined">
                <div class="card-header">
                    <h5 *ngIf="customer.id" class="mb-0"
                        jhiTranslate="entity.action.carTankInformation">
                        Create or edit a Customer
                    </h5>
                    <div class="row" *ngIf="!customer.id">
                        <h5 class="col-md-3"
                            jhiTranslate="entity.action.carTankInformation">
                            Create or edit
                        </h5>
                        <div class="col-md-8"></div>
                        <button type="button" class="btn btn-primary col-md-1"
                                (click)="newCarTank()">
                            <span class="fa fa-plus"></span>
                            <span jhiTranslate="entity.action.create">Create</span>
                        </button>
                    </div>
                </div>
                <div class="card-block container">
                    <div class="row" *ngIf="customer.id">
                        <p-dataTable #dt [value]="customer.carTanks"
                                     [immutable]="false"
                                     [paginator]="false" [responsive]="true" [stacked]="false">
                            <p-headerColumnGroup>
                                <p-row>
                                    <p-column field="tankNo" [sortable]="false">
                                        <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.carTank.tankNo">Person</span>
                                        </ng-template>
                                    </p-column>
                                    <p-column field="tankType" [sortable]="false">
                                        <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.carTank.tankType">Share Percent</span>
                                        </ng-template>
                                    </p-column>
                                </p-row>
                            </p-headerColumnGroup>

                            <p-column field="tankNo"
                                      [header]="'samtagatewayApp.carTank.tankNo' | translate"></p-column>
                            <p-column field="tankType" [header]="'samtagatewayApp.oilTank.oilTankType' | translate">
                                <ng-template let-item="rowData" pTemplate="body">
                                    <span>{{item.title}}</span>
                                </ng-template>
                            </p-column>
                        </p-dataTable>
                    </div>
                    <div class="row" *ngIf="!customer.id">
                        <form *ngIf="carTankCreate || carTankEdit" name="editFormCarTank" role="form" novalidate
                              #editFormCarTank="ngForm">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label jhiTranslate="samtagatewayApp.carTank.tankNo"
                                               for="field_tankNo">Type</label>
                                        <input [disabled]="isView" class="form-control" id="field_tankNo" name="tankNo1"
                                               [(ngModel)]="carTank.tankNo" required/>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label jhiTranslate="samtagatewayApp.carTank.tankType"
                                               for="field_tankType">Type</label>
                                        <select [disabled]="isView" class="form-control" name="tankType"
                                                [(ngModel)]="carTank.tankType"
                                                (ngModelChange)="changeTankType()"
                                                id="field_tankType" required>
                                            <option value="CUBE">{{'samtagatewayApp.TankType.CUBE' | translate}}
                                            </option>
                                            <option value="CONE">{{'samtagatewayApp.TankType.CONE' | translate}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3" *ngIf="carTank.tankType===TankType[TankType.CUBE]">
                                    <div class="form-group">
                                        <label jhiTranslate="samtagatewayApp.carTank.longitude"
                                               for="field_longitude">Type</label>
                                        <input [disabled]="isView" class="form-control" id="field_longitude"
                                               name="longitude"
                                               [numeric]="{min:0}"
                                               [(ngModel)]="carTank.longitude" required/>
                                    </div>
                                </div>
                                <div class="col-md-3" *ngIf="carTank.tankType===TankType[TankType.CUBE]">
                                    <div class="form-group">
                                        <label jhiTranslate="samtagatewayApp.carTank.latitude"
                                               for="field_latitude">Type</label>
                                        <input [disabled]="isView" class="form-control" id="field_latitude"
                                               name="latitude"
                                               [numeric]="{min:0}"
                                               [(ngModel)]="carTank.latitude" required/>
                                    </div>
                                </div>
                                <div class="col-md-3" *ngIf="carTank.tankType===TankType[TankType.CONE]">
                                    <div class="form-group">
                                        <label jhiTranslate="samtagatewayApp.carTank.radius"
                                               for="field_radius">Type</label>
                                        <input [disabled]="isView" class="form-control" id="field_radius"
                                               name="radius"
                                               [numeric]="{min:0}"
                                               [(ngModel)]="carTank.radius" required/>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label jhiTranslate="samtagatewayApp.carTank.height"
                                               for="field_height">Type</label>
                                        <input [disabled]="isView" class="form-control" id="field_height" name="height"
                                               [numeric]="{min:0}"
                                               [(ngModel)]="carTank.height" required/>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <p-dataTable [hidden]="carTankCreate || carTankEdit" #dt [value]="carTanks"
                                     [immutable]="false"
                                     [paginator]="false" [responsive]="true" [stacked]="false">
                            <p-headerColumnGroup>
                                <p-row>
                                    <p-column field="tankNo" [sortable]="false">
                                        <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.carTank.tankNo">Person</span>
                                        </ng-template>
                                    </p-column>
                                    <p-column field="tankType" [sortable]="false">
                                        <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.carTank.tankType">Share Percent</span>
                                        </ng-template>
                                    </p-column>
                                    <p-column styleClass="col-button2" *ngIf="!isView">
                                        <ng-template pTemplate="header">
                                        </ng-template>
                                    </p-column>
                                </p-row>
                            </p-headerColumnGroup>

                            <p-column field="tankNo"
                                      [header]="'samtagatewayApp.carTank.tankNo' | translate"></p-column>
                            <p-column field="tankType" [header]="'samtagatewayApp.oilTank.oilTankType' | translate">
                                <ng-template let-item="rowData" pTemplate="body">
                                    <span>{{item.title}}</span>
                                </ng-template>
                            </p-column>
                            <p-column class="component" *ngIf="!isView">
                                <ng-template let-item="rowData" pTemplate="body">
                                    <div class="btn-group" ngbDropdown placement="right">
                                        <button type="button" class="btn btn-danger"
                                                (click)="deleteCarTank(item)">
                                            <span class="fa fa-remove"></span>
                                            <span jhiTranslate="entity.action.delete">delete</span>
                                        </button>
                                        <button type="button" class="btn btn-info"
                                                (click)="editCarTank(item)">
                                            <span class="fa fa-edit"></span>
                                            <span jhiTranslate="entity.action.edit">edit</span>
                                        </button>
                                    </div>
                                </ng-template>
                            </p-column>
                        </p-dataTable>
                    </div>
                </div>
                <div class="card-footer" [hidden]="!carTankCreate && !carTankEdit">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cancelCarTank()">
                        <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                    </button>
                    <button type="button" class="btn btn-primary"
                            [disabled]="!carTank.tankType ||!carTank.tankNo || !carTank.height ||
                             (carTank.tankType===TankType[TankType.CUBE]&&(!carTank.latitude || !carTank.longitude)) ||
                             (carTank.tankType===TankType[TankType.CONE]&& !carTank.radius)"
                            (click)="saveCarTank()">
                        <span class="fa fa-save"></span>&nbsp;<span
                        jhiTranslate="entity.action.save">Save</span>
                    </button>
                </div>
            </div>

        </div>
        <div *ngIf="activeIndex===1">
            <div class="card" style="margin-top: 25px" *ngIf="existCustomer!==null && existCustomer!==undefined">
                <div class="card-header">
                    <h5 *ngIf="customer.id" class="mb-0"
                        jhiTranslate="entity.action.carInformation">
                        Create or edit a Customer
                    </h5>
                    <div class="row" *ngIf="!customer.id">
                        <h5 class="col-md-3"
                            jhiTranslate="entity.action.carInformation">
                            Create or edit
                        </h5>
                        <div class="col-md-8"></div>
                        <button type="button" *ngIf="customers.length === 0" class="btn btn-primary col-md-1"
                                (click)="newCustomer()">
                            <span class="fa fa-plus"></span>
                            <span jhiTranslate="entity.action.create">Create</span>
                        </button>
                    </div>
                </div>
                <div class="card-block container">
                    <div class="row" *ngIf="customer.id">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="form-control-label"
                                       jhiTranslate="samtagatewayApp.vehicleModel.home.title"
                                       for="field_vehicleModel">Product</label>
                                <input disabled type="text" class="form-control" name="vehicleModelTItleee"
                                       id="field_vehicleModel223"
                                       [(ngModel)]="customer.vehicleModelTitle"/>
                            </div>
                            <div
                                [hidden]="!(editForm.controls.product?.dirty && editForm.controls.product?.invalid)">
                                <small class="form-text text-danger"
                                       [hidden]="!editForm.controls.product?.errors?.required"
                                       jhiTranslate="entity.validation.required">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                        <div class="col-md-3"
                             *ngIf="vehicleModel.havePrimitiveMeasure">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.oilTank.productId"
                                       for="field_product">Product</label>
                                <input disabled type="text" class="form-control" name="product"
                                       id="field_product2334"
                                       [(ngModel)]="customer.productTitle"/>
                            </div>
                            <div
                                [hidden]="!(editForm.controls.product?.dirty && editForm.controls.product?.invalid)">
                                <small class="form-text text-danger"
                                       [hidden]="!editForm.controls.product?.errors?.required"
                                       jhiTranslate="entity.validation.required">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.customer.plaque"
                                       for="field_plaque">Name</label>
                                <jhi-plaque [disabled]="true" [plaqueId]="customer.plaqueTemplateId"
                                            id="field_plaque23232"
                                            [required]="true"
                                            [(ngModel)]="customer.plaque" class="form-control"
                                            [ngModelOptions]="{standalone: true}"></jhi-plaque>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer" [hidden]="!customerCreate && !customerEdit">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cancelCustomer()">
                        <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                    </button>
                    <button type="button" class="btn btn-primary"

                            (click)="saveCustomer()">
                        <span class="fa fa-save"></span>&nbsp;<span
                        jhiTranslate="entity.action.save">Save</span>
                    </button>
                </div>
            </div>
            <div class="card" style="margin-top: 25px">
                <div class="card-header">
                    <h5 class="mb-0"
                        jhiTranslate="entity.action.orderInformation">
                        Create or edit a Customer
                    </h5>
                </div>
                <div class="card-block container">
                    <div class="row">
                        <div class="col-md-4">
                            <label jhiTranslate="samtagatewayApp.order.locationId"
                                   for="field_locations">Location</label>
                            <p-dropdown required [options]="customLocation" [(ngModel)]="boundaryDTO.locationId"
                                        [filter]="true"
                                        [disabled]="isView"
                                        class="form-control"
                                        (ngModelChange)="onChangeLocation($event)"
                                        filterBy="label"
                                        id="field_locations"
                                        name="location"
                                        ngDefaultControl
                            ></p-dropdown>
                            <div [hidden]="isDay">
                                <small class="form-text text-danger"
                                       [hidden]="isDay" jhiTranslate="entity.validation.date.not.equal"
                                       translateValues="{day:'{{serverDate | dateJalali}}'}">
                                    This field is required.
                                </small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.order.targetCountry"
                                       for="field_country">Country</label>
                                <input class="form-control" type="text" id="field_country" name="target_country"
                                       [(ngModel)]="country.name" disabled/>
                                <!-- <p-dropdown [options]="customCountries" [(ngModel)]="order.targetCountryId"
                                             [filter]="true"
                                             [disabled]="isView"
                                             class="form-control"
                                             filterBy="label"
                                             id="field_targetCountry"
                                             name="tc1"
                                             ngDefaultControl
                                 >
                                 </p-dropdown>&lt;!&ndash;
                                 <select [disabled]="isView" class="form-control" id="field_country" name="country"
                                         [(ngModel)]="order.targetCountryId"
                                         required>
                                     <option [ngValue]="null" selected></option>
                                     <option *ngFor="let countryOption of countries; trackBy: trackCountryById"
                                             [ngValue]="countryOption.id"
                                     >
                                         {{countryOption.name}}
                                     </option>
                                 </select>&ndash;&gt;-->
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="form-control-label" jhiTranslate="samtagatewayApp.order.currency"
                                       for="field_currency">Country</label>
                                <select [disabled]="isView" class="form-control" id="field_currency" name="currency"
                                        [(ngModel)]="boundaryDTO.currencyId"
                                        required>
                                    <option [ngValue]="null" selected></option>
                                    <option *ngFor="let currencyOption of currencies; trackBy: trackCurrencyById"
                                            [ngValue]="currencyOption.id"
                                    >
                                        {{currencyOption.title}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label class="form-control-label" jhiTranslate="samtagatewayApp.order.cmr"
                                   for="field_cmr">Order
                                No</label>
                            <input [disabled]="isView" type="text" class="form-control" name="cmr"
                                   id="field_cmr"
                                   [(ngModel)]="boundaryDTO.cmr"/>
                        </div>
                        <div class="col-md-4">
                            <label class="form-control-label"
                                   jhiTranslate="samtagatewayApp.order.carnet"
                                   for="field_carnet">Order
                                No</label>
                            <input [disabled]="isView" type="text" class="form-control" name="carnet"
                                   id="field_carnet"
                                   [(ngModel)]="boundaryDTO.carnet"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card" style="margin-top: 25px"
                 *ngIf="boundaryDTO.locationId && boundaryDTO.targetCountryId && boundaryDTO.vehicleModelId && customer.productId">
                <div class="card-header">
                    <h5 *ngIf="customer.id" class="mb-0"
                        jhiTranslate="entity.action.discount">
                        Create or edit a Customer
                    </h5>
                    <div class="row" *ngIf="!customer.id">
                        <h5 class="col-md-3"
                            jhiTranslate="entity.action.carInformation">
                            Create or edit
                        </h5>
                        <div class="col-md-8"></div>
                    </div>
                </div>
                <div class="card-block container">
                    <div class="row">
                        <div class="col-md-6">
                            <p-dropdown [options]="customBoundaryDiscounts" [(ngModel)]="boundaryDiscountId"
                                        [filter]="true"
                                        [disabled]="isView"
                                        class="form-control"
                                        (ngModelChange)="onChangeSelector($event)"
                                        filterBy="label"
                                        id="field_boundaryDiscounts"
                                        name="boundaryDiscount"
                                        ngDefaultControl
                            ></p-dropdown>
                        </div>
                    </div>
                    <!--  <jhi-boundary-discount-selector
                          [locationId]="boundaryDTO.locationId"
                          [countryId]="boundaryDTO.targetCountryId"
                          [vehicleModelId]="boundaryDTO.vehicleModelId"
                          [productId]="customer.productId"
                          (ngModelChange)="onChangeSelector($event)"
                          [(ngModel)]="boundaryDiscountId"
                          [ngModelOptions]="{standalone: true}"
                      >

                      </jhi-boundary-discount-selector>-->
                </div>
                <div class="card-footer" [hidden]="!customerCreate && !customerEdit">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cancelCustomer()">
                        <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                    </button>
                    <button type="button" class="btn btn-primary"

                            (click)="saveCustomer()">
                        <span class="fa fa-save"></span>&nbsp;<span
                        jhiTranslate="entity.action.save">Save</span>
                    </button>
                </div>
            </div>
            <ng-container *ngIf="selectedLocation">
                <div class="card" style="margin-top: 25px"
                     *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSHIP] && (selectedLocation.transhipType === TranshipType[TranshipType.OUT_TO_INSIDE_WHIT_PRIMITIVE] ||
                            selectedLocation.transhipType === TranshipType[TranshipType.INSIDE_TO_OUT])">
                    <div class="card-header">
                        <h5 class="mb-0"
                            jhiTranslate="entity.action.primitiveOrderProductInformation">
                            Create or edit a Customer
                        </h5>
                    </div>
                    <div class="card-block container">
                        <div class="row">
                            <p-dataTable #dt [value]="boundaryDTO.boundaryItems"
                                         [immutable]="false"
                                         [paginator]="false" [responsive]="true" [stacked]="false">
                                <p-headerColumnGroup>
                                    <p-row>
                                        <p-column *ngIf="vehicleModel.havePrimitiveMeasure" field="tankType"
                                                  [sortable]="false">
                                            <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.carTank.tankType">Share Percent</span>
                                            </ng-template>
                                        </p-column>
                                        <p-column *ngIf="vehicleModel.havePrimitiveMeasure" field="measureHeight"
                                                  [sortable]="false">
                                            <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.measureHeight">Share Percent</span>
                                            </ng-template>
                                        </p-column>
                                        <ng-container *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSIT]">
                                            <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="amount"
                                                      [sortable]="false">
                                                <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.amount">Share Percent</span>
                                                </ng-template>
                                            </p-column>
                                            <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="productTitle"
                                                      [sortable]="false">
                                                <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.productId">Share Percent</span>
                                                </ng-template>
                                            </p-column>
                                        </ng-container>
                                    </p-row>
                                </p-headerColumnGroup>
                                <ng-container *ngIf="vehicleModel.havePrimitiveMeasure">
                                    <p-column class="component">
                                        <ng-template let-item="rowData" pTemplate="body">
                                            <span *ngIf="item.amountType===AmountType[AmountType.NORMAL]">باک {{item.carTank.tankNo}} - {{item.carTank.title}}</span>
                                            <span
                                                *ngIf="item.amountType===AmountType[AmountType.PUMP_NOZZLE_AMOUNT] && vehicleModel.havePrimitiveMeasure">از تلمبه</span>
                                            <span
                                                *ngIf="item.amountType===AmountType[AmountType.CAR_TANK_4_AMOUNT] && vehicleModel.havePrimitiveMeasure">باک 4</span>
                                        </ng-template>
                                    </p-column>

                                    <p-column field="measureHeight"
                                              [header]="'samtagatewayApp.carTank.radius'| translate">
                                        <ng-template let-item="rowData" pTemplate="body">
                                            <div class="row" *ngIf="item.amountType===AmountType[AmountType.NORMAL]">
                                                <div class="col-md-6">
                                                    <input [disabled]="isView"
                                                           (blur)="validateAmounts()" class="form-control col-md-12"
                                                           [numeric]="{min:0,max:item.carTank.height}"
                                                           [name]="'primitive-measureHeight' + item.carTankId"
                                                           [(ngModel)]="item.primitiveHeight"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <span class="form-control" style="background: #f2f5f7;border:0;">میلیمتر</span>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 *ngIf="item.amountType===AmountType[AmountType.CAR_TANK_4_AMOUNT]">
                                                <div class="col-md-6">
                                                    <input [disabled]="isView"
                                                           (blur)="validateAmounts()" class="form-control col-md-12"

                                                           [numeric]="{min:0}"
                                                           [name]="'primitive-measureHeight' + item.amountType"
                                                           [(ngModel)]="item.primitiveAmount"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <span class="form-control" style="background: #f2f5f7;border:0;">لیتر</span>
                                                </div>
                                            </div>
                                            <input [disabled]="true"
                                                   (blur)="validateAmounts()" class="form-control col-md-12"
                                                   *ngIf="item.amountType===AmountType[AmountType.PUMP_NOZZLE_AMOUNT]"
                                                   [numeric]="{min:0}"
                                                   [name]="'primitive-measureHeight' + item.amountType"
                                                   [(ngModel)]="item.primitiveAmount"/>
                                        </ng-template>
                                    </p-column>
                                </ng-container>
                                <ng-container *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSIT]">
                                    <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="amount"
                                              [header]="'samtagatewayApp.carTank.radius'| translate"></p-column>
                                    <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="productTitle"
                                              [header]="'samtagatewayApp.carTank.radius'| translate"></p-column>
                                </ng-container>
                            </p-dataTable>
                        </div>
                    </div>
                </div>
                <div class="card" style="margin-top: 25px">
                    <div class="card-header">
                        <h5 class="mb-0"
                            *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSIT] ||
                         (orderType===OrderType[OrderType.BOUNDARY_TRANSHIP] &&
                         selectedLocation.transhipType!==TranshipType[TranshipType.INSIDE_TO_OUT] &&
                         selectedLocation.transhipType!==TranshipType[TranshipType.OUT_TO_INSIDE_WHIT_PRIMITIVE])"
                            jhiTranslate="entity.action.orderProductInformation">
                            Create or edit a Customer
                        </h5>
                        <h5 class="mb-0"
                            *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSHIP] &&(
                         selectedLocation.transhipType===TranshipType[TranshipType.INSIDE_TO_OUT] ||
                         selectedLocation.transhipType===TranshipType[TranshipType.OUT_TO_INSIDE_WHIT_PRIMITIVE])"
                            jhiTranslate="entity.action.finalOrderProductInformation">
                            Create or edit a Customer
                        </h5>
                    </div>
                    <div class="card-block container">
                        <div class="row">
                            <p-dataTable #dt [value]="boundaryDTO.boundaryItems"
                                         [immutable]="false"
                                         [paginator]="false" [responsive]="true" [stacked]="false">
                                <p-headerColumnGroup>
                                    <p-row>
                                        <p-column *ngIf="vehicleModel.havePrimitiveMeasure" field="tankType"
                                                  [sortable]="false">
                                            <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.carTank.tankType">Share Percent</span>
                                            </ng-template>
                                        </p-column>
                                        <p-column *ngIf="vehicleModel.havePrimitiveMeasure" field="measureHeight"
                                                  [sortable]="false">
                                            <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.measureHeight">Share Percent</span>
                                            </ng-template>
                                        </p-column>
                                        <ng-container *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSIT]">
                                            <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="amount"
                                                      [sortable]="false">
                                                <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.amount">Share Percent</span>
                                                </ng-template>
                                            </p-column>
                                            <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="productTitle"
                                                      [sortable]="false">
                                                <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.productId">Share Percent</span>
                                                </ng-template>
                                            </p-column>
                                        </ng-container>
                                    </p-row>
                                </p-headerColumnGroup>
                                <ng-container *ngIf="vehicleModel.havePrimitiveMeasure">
                                    <p-column class="component">
                                        <ng-template let-item="rowData" pTemplate="body">
                                            <span *ngIf="item.amountType===AmountType[AmountType.NORMAL]">باک {{item.carTank.tankNo}} - {{item.carTank.title}}</span>
                                            <span
                                                *ngIf="item.amountType===AmountType[AmountType.PUMP_NOZZLE_AMOUNT] && vehicleModel.havePrimitiveMeasure">از تلمبه</span>
                                            <span
                                                *ngIf="item.amountType===AmountType[AmountType.CAR_TANK_4_AMOUNT] && vehicleModel.havePrimitiveMeasure">باک 4</span>
                                        </ng-template>
                                    </p-column>

                                    <p-column field="measureHeight"
                                              [header]="'samtagatewayApp.carTank.radius'| translate">
                                        <ng-template let-item="rowData" pTemplate="body">
                                            <div class="row"
                                                 *ngIf="item.amountType===AmountType[AmountType.NORMAL]">
                                                <div class="col-md-6">
                                                    <input [disabled]="isView"
                                                           (blur)="validateAmounts()" class="form-control col-md-12"
                                                           [numeric]="{min:0,max:item.carTank.height}"
                                                           [name]="'measureHeight' + item.carTankId"
                                                           [(ngModel)]="item.height"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <span class="form-control" style="background: #f2f5f7;border:0;">میلیمتر</span>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 *ngIf="item.amountType===AmountType[AmountType.PUMP_NOZZLE_AMOUNT]">
                                                <div class="col-md-6">
                                                    <input [disabled]="isView"
                                                           (blur)="validateAmounts()" class="form-control col-md-12"
                                                           [numeric]="{min:0}"
                                                           [name]="'measureHeight' + item.amountType"
                                                           [(ngModel)]="item.amount"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <span class="form-control" style="background: #f2f5f7;border:0;">لیتر</span>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 *ngIf="item.amountType===AmountType[AmountType.CAR_TANK_4_AMOUNT] && selectedLocation && (selectedLocation.transhipType === TranshipType[TranshipType.OUT_TO_INSIDE_WHIT_PRIMITIVE]
                                                  ||selectedLocation.transhipType === TranshipType[TranshipType.INSIDE_TO_OUT]) && orderType===OrderType[OrderType.BOUNDARY_TRANSHIP]">
                                                <div class="col-md-6">
                                                    <input [disabled]="isView"
                                                           (blur)="validateAmounts()" class="form-control col-md-12"
                                                           [numeric]="{min:0}"
                                                           [name]="'measureHeight' + item.amountType"
                                                           [(ngModel)]="boundaryDTO.carTank4Amount"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <span class="form-control" style="background: #f2f5f7;border:0;">لیتر</span>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 *ngIf="item.amountType===AmountType[AmountType.CAR_TANK_4_AMOUNT] &&
                                                    ((selectedLocation &&
                                                        (selectedLocation.transhipType === TranshipType[TranshipType.OUT_TO_INSIDE_WHIT_OUT_PRIMITIVE]
                                                        )
                                                     && orderType===OrderType[OrderType.BOUNDARY_TRANSHIP]) ||
                                                      (orderType===OrderType[OrderType.BOUNDARY_TRANSIT]))">
                                                <div class="col-md-6">
                                                    <input [disabled]="isView"
                                                           (blur)="validateAmounts()" class="form-control col-md-12"
                                                           [numeric]="{min:0}"
                                                           [name]="'measureHeight' + item.amountType"
                                                           [(ngModel)]="item.amount"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <span class="form-control" style="background: #f2f5f7;border:0;">لیتر</span>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </p-column>
                                </ng-container>
                                <ng-container *ngIf="orderType===OrderType[OrderType.BOUNDARY_TRANSIT]">
                                    <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="amount">
                                        <ng-template let-item="rowData" pTemplate="body">
                                            <input name="editableLiter" id="editableLiter" [(ngModel)]="item.amount"
                                                   class="form-control" type="number"
                                                   [numeric]="{min:item.maxAmount}"
                                                   [disabled]="isView"/>
                                        </ng-template>
                                    </p-column>
                                    <p-column *ngIf="!vehicleModel.havePrimitiveMeasure" field="productTitle"
                                              [header]="'samtagatewayApp.carTank.radius'| translate"></p-column>
                                </ng-container>
                            </p-dataTable>
                        </div>
                        <div class="row" style="margin-top: 10px">
                            <div class="col-md-2">
                                <button
                                    [disabled]="editForm.form.invalid"
                                    type="button"

                                    class="form-control btn btn-primary"
                                    id="field_calculatePrice"
                                    (click)="calculatePrice()">
                                <span class="fa fa-calculator">&nbsp;<span
                                    jhiTranslate="entity.action.calculatePrice"></span></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
            <div class="card" style="margin-top: 25px" *ngIf="showPriceTable">
                <div class="card-header">
                    <h5 class="mb-0"
                        jhiTranslate="entity.action.orderPriceInformation">
                        Create or edit a Customer
                    </h5>
                </div>
                <div class="card-block container">
                    <p-dataTable #dt [value]="responseBoundaryDTO.boundaryItems"
                                 [immutable]="false"
                                 [paginator]="false" [responsive]="true" [stacked]="false">
                        <p-headerColumnGroup>
                            <p-row>
                                <p-column
                                    *ngIf="(orderType===OrderType[OrderType.BOUNDARY_TRANSIT] && vehicleModel.havePrimitiveMeasure)|| (orderType===OrderType[OrderType.BOUNDARY_TRANSHIP])"
                                    field="code" [sortable]="false">
                                    <ng-template pTemplate="header">

                                    </ng-template>
                                </p-column>
                                <p-column field="amount" [sortable]="false">
                                    <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.orderProduct.amount">Person</span>
                                    </ng-template>
                                </p-column>
                                <p-column field="productRatePrice" [sortable]="false">
                                    <ng-template pTemplate="header">
                                            <span
                                                jhiTranslate="samtagatewayApp.orderProduct.productRatePrice">Share Percent</span>
                                    </ng-template>
                                </p-column>
                                <p-column field="productPrice" [sortable]="false">
                                    <ng-template pTemplate="header">
                                <span
                                    jhiTranslate="samtagatewayApp.orderProduct.productPrice">Share Percent</span>
                                    </ng-template>
                                </p-column>
                            </p-row>
                        </p-headerColumnGroup>
                        <p-column class="component"
                                  *ngIf="(orderType===OrderType[OrderType.BOUNDARY_TRANSIT] && vehicleModel.havePrimitiveMeasure)|| (orderType===OrderType[OrderType.BOUNDARY_TRANSHIP])">
                            <ng-template let-item="rowData" pTemplate="body">
                                <span
                                    *ngIf="item.amountType===AmountType[AmountType.NORMAL]">باک {{item.carTank.tankNo}}</span>
                                <span
                                    *ngIf="item.amountType===AmountType[AmountType.PUMP_NOZZLE_AMOUNT] && vehicleModel.havePrimitiveMeasure ">از تلمبه</span>
                                <span
                                    *ngIf="item.amountType===AmountType[AmountType.CAR_TANK_4_AMOUNT] && vehicleModel.havePrimitiveMeasure ">باک ۴</span>
                            </ng-template>
                        </p-column>
                        <p-column field="amount"
                                  [header]="'samtagatewayApp.carTank.tankNo' | translate"></p-column>
                        <p-column field="productRatePrice"
                                  [header]="'samtagatewayApp.orderProduct.productRatePrice' | translate"></p-column>
                        <p-column field="price"
                                  [header]="'samtagatewayApp.orderProduct.price' | translate">
                            <ng-template let-item="rowData" pTemplate="body">
                                {{item.price}} {{boundaryDTO.currencyTitle}}
                            </ng-template>
                        </p-column>
                    </p-dataTable>
                    <div class="row" *ngIf="responseBoundaryDTO">
                        <div class="col-md-6">
                            <label>تخفیف</label>
                            <label>{{responseBoundaryDTO.orderDiscount.price}}
                                {{responseBoundaryDTO.currencyTitle}}</label>
                        </div>
                        <div class="col-md-6">
                            <label>مبلغ کل</label>
                            <label>{{responseBoundaryDTO.totalPrice}} {{responseBoundaryDTO.currencyTitle}}</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="activeIndex===2">
            <jhi-e-payment #ePayment [requestIdentifier]="identifier"
                           [showButton]="false"
                           (status)="onPayStatus($event)"></jhi-e-payment>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="clear()">
            <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
        </button>
        <button
            [disabled]="!customer.id && ( customers.length<1 || (vehicleModel.havePrimitiveMeasure && carTanks.length===0 )
                ||(!vehicleModel.havePrimitiveMeasure && carTanks.length!==0))"
            type="button"
            *ngIf="activeIndex===0"
            class="btn btn-primary"
            data-dismiss="modal"
            (click)="save()">
            <span class="fa fa-arrow-left"></span>&nbsp;<span
            jhiTranslate="samtagatewayApp.order.nextStep">Cancel</span>
        </button>
        <button type="button"
                *ngIf="activeIndex===1"
                class="btn btn-primary"
                data-dismiss="modal"
                (click)="previousStep()">
            <span class="fa fa-arrow-right"></span>&nbsp;<span
            jhiTranslate="samtagatewayApp.order.back">Cancel</span>
        </button>
        <button type="button"
                [disabled]="editForm.form.invalid ||(vehicleModel.havePrimitiveMeasure && boundaryDTO.boundaryItems.length === 0 && orderType===OrderType[OrderType.BOUNDARY_TRANSIT]) || isView"
                *ngIf="activeIndex===1"
                class="btn btn-primary"
                data-dismiss="modal"
                (click)="saveOrder(false,false)">
            <span class="fa fa-save"></span>&nbsp;<span
            jhiTranslate="entity.action.save">Cancel</span>
        </button>
        <button type="button"
                [disabled]="editForm.form.invalid || (vehicleModel.havePrimitiveMeasure && boundaryDTO.boundaryItems.length === 0) || isView"
                *ngIf="(activeIndex===1 || activeIndex===2) && payStatus !== 'PENDING'"
                class="btn btn-primary"
                data-dismiss="modal"
                (click)="saveOrder(true,false)">
            <span class="fa fa-arrow-left"></span>&nbsp;<span
            jhiTranslate="samtagatewayApp.order.paymentCredit">Cancel</span>
        </button>
        <button type="button"
                class="btn btn-success"
                (click)="saveOrder(true,true)"
                *ngIf="activeIndex === 2 && payStatus === 'PENDING'"
        >
            <span class="fa fa-refresh"></span>&nbsp;<span jhiTranslate="samtagatewayApp.order.paymentFinalAgain">paymentFinalAgain</span>
        </button>
    </div>
</form>
